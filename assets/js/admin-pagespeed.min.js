jQuery(document).ready(function(e){function b(){e("#main-toggles").ajax({success:function(){console.log("Succes");setTimeout(function(){},2500)},timeout:5000})}function d(h){let strategy=h?h:"";console.log("Getting: "+strategy);e(".page_speed_result").addClass("page_speed_result-loading");const f=document.getElementById("page_speed_result");f.innerHTML="<div></div>";const g=window.atob("QUl6YVN5Qk1uRTRyTHd3TWN1WFJzc2MwVUk3ejJaWENrT0lXcVd3");e.ajax({url:"https://www.googleapis.com/pagespeedonline/v5/runPagespeed?url=https://"+window.location.hostname+"&key="+g+strategy,type:"GET",data:{},async:true,dataType:"json",success:function(l){e(".page_speed_result").removeClass("page_speed_result-loading");let totalScore=0;f.innerHTML='<div id="chartContainer"><h3 id="chartTitle"></h3><canvas id="totalScoreChart"></canvas></div><h3>Lab data</h3><table id="resultTable"></table><div id="finalScreenshot"></div><div id="speedPics"></div></div>';const k=l.lighthouseResult.audits;const j=["first-contentful-paint","speed-index","interactive","first-meaningful-paint","first-cpu-idle","estimated-input-latency"];let i=0;let xi=0;for(let g in k){if(typeof k[g]!=="function"){if(k[g].score==null){k[g].score=0}if(j.includes(g)){let score=(k[g].score*100);totalScore=totalScore+score;i++}if(typeof k[g].score!=="undefined"&&k[g].score!==null&&typeof k[g].displayValue!=="undefined"){c(k[g]);xi++}}}totalScore=Math.round(totalScore/i);document.getElementById("chartTitle").innerText="Totalscore: "+totalScore+"%";new Chart(document.getElementById("totalScoreChart"),{type:"doughnut",data:{labels:["Total score",""],datasets:[{label:"Total score",data:[totalScore,100-totalScore],backgroundColor:[a(totalScore),"rgba(54, 162, 235, 0)"],borderColor:[a(totalScore),"rgba(54, 162, 235, 0)"],borderWidth:0}]}});document.getElementById("finalScreenshot").innerHTML='<img src="'+k["final-screenshot"].details.data+'" alt=""><p>Final Screenshot</p>';const m=k["screenshot-thumbnails"].details.items;for(let i=0;i<m.length;i++){document.getElementById("speedPics").innerHTML+='<div class="speedPic""><img src="'+m[i].data+'" alt="'+m[i].timing+'"><p>'+m[i].timing+"ms</p></div>"}},error:function(j){f.innerHTML=" status : "+j.status+" statusText : "+j.statusText+" readyState : "+j.readyState+" responseText : "+j.responseText},timeout:0})}e(".siw_pagespeed_btn").on("click",function(){d("&strategy="+e(this).data("value"))});function c(g){const j=g.score*100;let headings="";let headingKeys=[];let rows="";if(typeof g.details!=="undefined"&&g.details.type==="opportunity"){rows+='<tr class="showDetails"><td><span class="dashicons dashicons-arrow-up"></span></td></tr>';for(let i=0;i<g.details.headings.length;i++){if(g.details.headings[i].valueType!=="thumbnail"){if(g.details.headings[i].key==="url"){const f=g.details.headings[i].key;const h=g.details.headings[i].label;headings+='<th class="itemHeading">'+h+"</th>"}}else{}}for(let z=0;z<g.details.items.length;z++){let rowColums="";for(let headKey in g.details.items[z]){if(headKey==="url"){rowColums+='<td class="itemUrl"><a target="_blank" href="'+g.details.items[z]["url"]+'">'+g.details.items[z]["url"]+"</a></td>"}}rows+='<tr class="detailUrls" style="display: none;">'+rowColums+"</tr>"}}document.getElementById("resultTable").innerHTML+='<tr><td class="result">'+g.title+':</td><td class="result" style="color: '+a(j)+'">'+g.displayValue+"</td></tr>"+rows;return j}function a(f){if(f>=90){return"green"}else{if(f>=50&&f<=89){return"orange"}else{if(f>=0&&f<=49){return"red"}}}}e("#page_speed_result").on("click",".showDetails",function(){e(this).toggleClass("open");e(this).siblings(".detailUrls").slideToggle(1000)})});